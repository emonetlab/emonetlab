<div id="{{include.albumname}}">

    {%- for image in site.static_files -%}
    {%- if image.path contains 'images/gallery' and image.path contains include.albumname -%}
    {%- unless image.path contains 'thumbnails' -%}

    {%- comment -%} Step 1: Get the filename without the extension {%- endcomment -%}
    {%- assign filename_base = image.name | remove: image.extname -%}

    {%- comment -%} Step 2: Set the caption based on the filename {%- endcomment -%}
    {%- if filename_base | downcase | starts_with: 'img' -%}
      {%- assign caption = "" -%}
    {%- else -%}
      {%- assign caption = filename_base | replace: '-', ' ' -%}
    {%- endif -%}

    <a href="{{ image.path }}" data-sub-html="{{ caption }}">
        <img src="/thumbnails{{ image.path }}" />
    </a>

    {%- endunless -%}
    {%- endif -%}
    {%- endfor -%}

</div>
<script type="text/javascript">
    lightGallery(document.getElementById("{{include.albumname}}"));
</script>
